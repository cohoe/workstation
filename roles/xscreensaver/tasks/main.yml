---
- name: install
  dnf:
    name: xscreensaver
    state: latest
  become: yes

- name: create config file
  file:
    path: '~/.xscreensaver'
    state: touch

- name: disable
  lineinfile:
    dest: ~/.xscreensaver
    regexp: "^mode"
    line: "mode:\toff"
  when: ansible_virtualization_role == "guest"

- name: enable
  lineinfile:
    dest: ~/.xscreensaver
    regexp: "^mode"
    line: "mode:\tone"
  when: ansible_virtualization_role != "guest"

- name: select screensaver
  lineinfile:
    dest: ~/.xscreensaver
    regexp: "^selected"
    line: "selected:\t115"
