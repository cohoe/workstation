---
- name: install package
  snap:
    name: ferdi
    state: present
  become: yes

- name: create config directories
  file:
    path: "{{ item }}"
    state: directory
  with_items:
    - ~/.config/Ferdi/config
    - ~/.config/Ferdi/recipes
    - ~/.config/Ferdi/recipes/messenger
    - ~/.config/Ferdi/recipes/googlecalendar

#- name: settings
#  copy:
#    src: settings.json
#    dest: ~/.config/Ferdi/config/settings.json
#    backup: yes

# Darkmode themes
# Really need a way to auto-update these as I suspect the CSS classes will change pretty frequently
# * Slack is detailed in https://github.com/cohoe/workstation/issues/30
#   The file was generated with the base CSS from Github + the overrides I put 
#   in the customCustomCSS var. They should get unified a bit. I really should
#   do a PR....
# * [FB] Messenger comes from https://github.com/cicerakes/DarkNight-FBMessenger/blob/master/DarkNightFBM.user.css
#   Just remove the weird bits
#   with notes and things from https://github.com/meetfranz/franz/issues/960
# * Google Calendar: https://userstyles.org/styles/143026/dark-google-calendar-2019
- name: custom service darkmode css
  copy:
    src: "{{ item }}.css"
    dest: "~/.config/Ferdi/recipes/{{ item }}/darkmode.css"
  with_items:
    - messenger
    - googlecalendar
