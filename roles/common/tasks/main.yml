---
- name: see if python2-dnf is installed
  shell:
    cmd: rpm -qi python2-dnf
  become: yes
  register: python_libs_installed

- name: manually install python-dnf libs
  shell:
    cmd: dnf install python2-dnf -y
    warn: false
  become: yes
  when: python_libs_installed.rc != 0

- name: install python selinux bindings
  dnf:
    name:
      - python2-libsemanage
      - python2-libselinux
    state: present
  become: yes

- name: update all packages
  dnf:
    name: '*'
    state: latest
  become: yes

- name: create ansible facts directory
  file:
    path: /etc/ansible/facts.d
    recurse: yes
    state: directory
  become: yes
