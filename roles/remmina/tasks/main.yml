---
- name: install
  dnf:
    name:
      - remmina
      - 'remmina-plugins-*'
    state: latest
  become: yes

- name: create config directory
  file:
    path: '~/.remmina'
    state: directory
    mode: 0700

- name: create known host configs
  template:
    src: connection.j2
    dest: "~/.remmina/{{ item.name }}.remmina"
  with_items:
    - "{{ remmina_hosts }}"
  when: remmina_hosts is defined
