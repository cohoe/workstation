---
# A home computer
#
include: base.yml
include: desktop.yml

- name: Home
  hosts: all
  vars:
    - firewalld_zone: home
    - firewalld_enabled_services:
        - ssh
  roles:
    - security
    - hdhomerun
    - arduino
    - chrome/remote
    - samba
    - httpd
    - wemo
    - steam
    - pulse
    - wallpaper

  tasks:
    # NVIDIA drivers
    - name: "determine gpu"
      shell: bash -c "lspci | grep VGA"
      register: lspci_gpu

    - name: "include nvidia"
      include_role:
        name: nvidia
      when: "'NVIDIA' in '{{ lspci_gpu.stdout }}'"

  vars_files:
    - ../vars/global.yml
