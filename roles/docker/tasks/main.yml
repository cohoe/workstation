---
- name: install
  dnf:
    name:
      - docker
      - docker-compose
      - python2-docker
      - python3-docker
    state: latest
  become: yes

- name: create docker group
  group:
    name: docker
    state: present
  become: yes

- name: add user to group
  user:
    name: "{{ ansible_user_id }}"
    append: yes
    groups: docker
  become: yes

- name: enable service
  service:
    name: docker
    state: started
    enabled: yes
  become: yes

# Must become until group privileges take effect
- name: pull frequent images
  docker_image:
    name: "{{ item.name }}"
    tag: "{{ item.tag }}"
  with_items:
    - name: "fedora"
      tag: "latest"
    - name: "centos"
      tag: "latest"
  become: yes
