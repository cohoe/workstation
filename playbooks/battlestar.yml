---
# A remote Docker host computer
#
- name: Battlestar
  hosts: all
  vars:
    - firewalld_zone: home
    - firewalld_enabled_services:
        - ssh

  # Security, SSL, dns, remmina need to be here so that it gets the vars file
  roles:
    - selinux
    - dnf
    - rpmfusion
    - fedorarepos
    - clitools
    - shell
    - sudo
    - tls
    - java
    - grub
    - mime
    - docker
    - fail2ban
    - networkmanager
    - firewalld
    - ssh
    - hdhomerun
    - mail
    - backups/workstation
    - sysctl

  tasks:
    # Log when we last ran
    - name: log run date to file
      copy:
        dest: /etc/buildinfo
        content: "{{ ansible_date_time.iso8601 }}"
        mode: 0644
      become: yes

  vars_files:
    - ../vars/global.yml
    - ../vars/home.yml
