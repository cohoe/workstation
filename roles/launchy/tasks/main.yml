---
- name: create launchy repo
  copy:
    src: launchy.repo
    dest: /etc/yum.repos.d/launchy.repo
  become: yes

- name: install key
  rpm_key:
    state: present
    key: https://packagecloud.io/grantcohoe/launchy/gpgkey
  become: yes

- name: install
  dnf:
    name: launchy
    state: latest
  become: yes

- name: create configuration directory
  file:
    path: ~/.launchy
    state: directory

- name: install config
  copy:
    dest: "~/.launchy/launchy.ini"
    src: launchy.ini

- name: configure autostart
  copy:
    dest: "{{ user_autostart_dir }}/launchy.desktop"
    src: "{{ sys_shortcuts_dir }}/launchy.desktop"

- name: "Set XFCE autostart"
  lineinfile:
    dest: "{{ user_autostart_dir }}/launchy.desktop"
    regexp: "^X-XFCE-Autostart-Override"
    line: "X-XFCE-Autostart-Override=true"
