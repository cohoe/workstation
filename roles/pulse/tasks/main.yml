---
- name: "packages | install"
  dnf: name={{ item }} state=latest
  become: yes
  with_items:
    - pulseaudio-equalizer

- name: "config directory | create"
  file: path=~/.pulse
        state=directory

- name: "equalizer config | copy"
  copy: src=equalizerrc
        dest=~/.pulse/equalizerrc

- name: "equalizer | enable"
  shell: pulseaudio-equalizer {{ item }}
  with_items:
    - enable
    - enable-config

- name: "flat-volumes | disable"
  lineinfile:
    dest: /etc/pulse/daemon.conf
    regexp: "^flat-volumes = "
    line: "flat-volumes = no"
  become: yes

- name: "suspend-idle | disable"
  lineinfile:
    dest: /etc/pulse/default.pa
    regexp: "load-module module-suspend-on-idle$"
    line: "# load-module module-suspend-on-idle"
  become: yes
