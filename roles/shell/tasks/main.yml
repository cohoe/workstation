---
- name: "packages | install"
  dnf: name={{ item }} state=latest
  become: yes
  with_items:
    - zsh
    - tmux
    - screen

# This is needed for face to work
- name: "home dir permissions"
  file: path=~
        mode=0771

- name: "user bin dir | create"
  file: path={{ user_bin_dir }} state=directory

- name: "Home subdirectories | create"
  file: path=~/{{ item }}
        state=directory
  with_items:
    - Software

# Projects directory
- file: path=~/Projects
        state=directory
- file: path=~/Projects/{{ item }}
        state=directory
  with_items:
    - pub
    - priv

# Misc dotfiles
- copy: dest=~/.{{ item }}
        src={{ item }}
  with_items:
    - gitconfig
    - gitignore
    - vimrc
    - screenrc
    - tmux.conf

# Root dotfiles
- copy: dest=~/.{{ item }}
        src={{ item }}
  become: yes
  with_items:
    - vimrc
    - screenrc

# zshrc
- copy: dest=~/.zshrc
        src=zsh/zshrc

# ohmyzsh
- git: repo={{ ohmyzsh_repo }}
       dest={{ ohmyzsh_directory }}

# Custom files
- copy: dest={{ ohmyzsh_directory }}/custom/{{ item }}
        src=zsh/{{ item }}
  with_items:
    - aliases.zsh
    - environment.zsh
    - path.zsh

# NVM
- git: repo={{ nvm_repo }}
       dest={{ nvm_directory }}
       version={{ nvm_version }}

- copy: dest={{ ohmyzsh_directory}}/custom/nvm.zsh
        src=zsh/nvm.zsh


- name: "user | shell | set"
  user: name={{ ansible_user_id }}
        shell=/bin/zsh
  become: yes

# Face for login
- name: "user picture | get"
  get_url: url={{ user_face }}
           dest=~/.face
  when: user_face is defined
