---
- name: "thunar | create"
  shell: xfconf-query -c thunar -p {{ item.key }} --create -t string -s {{ item.value }}
  environment:
    DISPLAY: "{{xfce_display}}"
  with_items:
    - { key: '/default-view', value: "ThunarDetailsView" }
    - { key: '/last-view', value: "ThunarDetailsView" }
    - { key: '/last-side-pane', value: "ThunarTreePane" }

- name: "thunar | shortcut | install"
  copy: src={{ sys_shortcuts_dir }}/Thunar.desktop
        dest={{ local_shortcuts_dir }}/Thunar.desktop
  sudo: yes

- name: "thunar | shortcut | icon"
  lineinfile:
    dest: "{{ local_shortcuts_dir }}/Thunar.desktop"
    regexp: "^Icon="
    line: "Icon=system-file-manager"
  sudo: yes

- name: "thunar | packages | install"
  dnf: name={{ item }} state=latest
  sudo: yes
  with_items:
    - gvfs-afc
    - gvfs-afp
    - gvfs-smb
    - gvfs-mtp
    - gvfs-nfs
    - gvfs-fuse
    - gvfs-archive

- name: "thunar | special packages | install"
  dnf: name={{ item }} state=latest
  sudo: yes
  with_items:
    - gstreamer1-libav
    - tumbler-extras
  when: '"rpmfusion" in use_repos'
